var height=100,width=100,swapped=!0;function drawFrame(t){function w(t,w,r,e){function a(t,w,r){return(t.x-r.x)*(w.y-r.y)-(w.x-r.x)*(t.y-r.y)>0}return offX=width/2,offY=height/2,vert1={x:w.x+offX,y:w.y+offY},vert2={x:r.x+offX,y:r.y+offY},vert3={x:e.x+offX,y:e.y+offY},a(t,vert1,vert2)&&a(t,vert2,vert3)&&a(t,vert3,vert1)}rotated=JSON.parse(JSON.stringify(triangles));var r=.12*t;for(rotated.forEach((t,w,e)=>{for(v=0;v<3;v++){let t=triangles[w][v].x,e=rotated[w][v].y,a=triangles[w][v].z;rotated[w][v].x=t*Math.cos(r)+a*Math.sin(r),rotated[w][v].z=a*Math.cos(r)-t*Math.sin(r),a=rotated[w][v].z,rotated[w][v].y=e*Math.cos(-.15)-a*Math.sin(-.15),rotated[w][v].z=e*Math.sin(-.15)+a*Math.cos(-.15)}}),swapped=!0;swapped;)for(i=0;i<triangles.length-1;i++)if(swapped=!1,tri=triangles[i],tri2=triangles[i+1],avgz=(tri[0].z+tri[1].z+tri[2].z)/3,avgz2=(tri2[0].z+tri2[1].z+tri2[2].z)/3,avgz>avgz2){let t=triangles[i];triangles[i]=triangles[i+1],triangles[i+1]=t,swapped=!0}for(console.clear(),y=0;y<height;y++){var e="";for(x=0;x<width;x++)current=" ",rotated.forEach(t=>{w({x:x,y:y},t[0],t[1],t[2])&&(current=".=!#$"[t[3]])}),e+=current;e!=" ".repeat(width)&&console.log(e)}setTimeout(()=>drawFrame(t+1),1e3/7)}buffer=[],triangles=triangles=[[{x:-15,y:-5.25,z:15},{x:15,y:-5.25,z:15},{x:15,y:5.25,z:15},4],[{x:-15,y:-5.25,z:15},{x:15,y:5.25,z:15},{x:-15,y:5.25,z:15},4],[{x:-15,y:5.25,z:-15},{x:15,y:5.25,z:-15},{x:15,y:-5.25,z:-15},3],[{x:-15,y:5.25,z:-15},{x:15,y:-5.25,z:-15},{x:-15,y:-5.25,z:-15},3],[{x:15,y:5.25,z:15},{x:15,y:-5.25,z:15},{x:15,y:-5.25,z:-15},2],[{x:15,y:5.25,z:15},{x:15,y:-5.25,z:-15},{x:15,y:5.25,z:-15},2],[{x:-15,y:5.25,z:-15},{x:-15,y:-5.25,z:-15},{x:-15,y:-5.25,z:15},1],[{x:-15,y:5.25,z:-15},{x:-15,y:-5.25,z:15},{x:-15,y:5.25,z:15},1],[{x:-15,y:-5.25,z:-15},{x:15,y:-5.25,z:-15},{x:15,y:-5.25,z:15},0],[{x:-15,y:-5.25,z:-15},{x:15,y:-5.25,z:15},{x:-15,y:-5.25,z:15},0]],rotated=[],drawFrame(1);
